<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flashcards with MathJax</title>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
</head>
<body>
    <div id="flashcards-container">
        <div class="flashcard">
            <p id="flashcard-question"></p>
            <button onclick="showAnswer()">Show Answer</button>
            <button onclick="loadRandomFlashcard()">Next Question</button>
            <div id="mathjax-container"></div>
        </div>
    </div>

    <script>
        let currentFlashcard = null;

        function loadRandomFlashcard() {
            fetch('/get_random_flashcard')
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        console.error(data.error);
                        return;
                    }
                    currentFlashcard = data;
                    document.getElementById('flashcard-question').innerHTML = data.question;
                    document.getElementById('mathjax-container').innerHTML = ''; // Clear previous answer
                    MathJax.Hub.Queue(["Typeset", MathJax.Hub, document.getElementById('flashcard-question')]);
                })
                .catch(error => console.error('Error fetching flashcard:', error));
        }

        function showAnswer() {
            if (currentFlashcard) {
                const container = document.getElementById('mathjax-container');
                container.innerHTML = currentFlashcard.answer;
                MathJax.Hub.Queue(["Typeset", MathJax.Hub, container]);
            } else {
                console.error('No flashcard loaded to show answer.');
            }
        }

        // Load the first flashcard when the page loads
        window.onload = loadRandomFlashcard;
    </script>
</body>
</html>
